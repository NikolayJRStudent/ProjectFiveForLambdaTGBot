let fetchWeatherData,formatWeatherForecast;_4ac‍.x([["default",()=>_4ac‍.o]]);_4ac‍.w("./fetchWeatherData.mjs",[["default",["fetchWeatherData"],function(v){fetchWeatherData=v}]]);_4ac‍.w("./formatWeatherForecast.mjs",[["default",["formatWeatherForecast"],function(v){formatWeatherForecast=v}]]);

 // Импортируем fetchWeatherData


const handleSocketEvents = (io, pkg, intervalId, intervalInHours, bot, url) => {
  io.on('connection', (socket) => {
    _4ac‍.g.console.log('Подключение сокета:', socket.id);

    socket.on('startForecast', async () => {
      console.log('Запуск прогноза погоды');
      
      intervalId = setInterval(async () => {
        const chatId = await pkg.getItem("chatId");
        fetchWeatherData(url)
          .then((weatherData) => {
            const formattedForecast = formatWeatherForecast(weatherData);
            bot.sendMessage(chatId, formattedForecast);
          })
          .catch((error) => {
            _4ac‍.g.console.error("Error fetching weather data:", error);
          });
      }, intervalInHours * 60 * 60 * 1000);

    });
  });
};

_4ac‍.d(handleSocketEvents);